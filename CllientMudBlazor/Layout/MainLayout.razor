@using CllientMudBlazor.Pages.Authentication
@using CllientMudBlazor.Pages.MainDashBoards
@using CllientMudBlazor.Themes
@using System.Threading.Tasks

@inherits LayoutComponentBase

<MudThemeProvider />
<MudDialogProvider FullWidth="true"
                   CloseButton="true"
                   BackdropClick="false"
                   Position="DialogPosition.Center"
                   CloseOnEscapeKey="true" />
<MudSnackbarProvider />
<MudPopoverProvider />
<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Primary">

        <MudText Typo="Typo.h6" Class="ml-3">PM Manager for Colgate-Palmolive</MudText>
        <MudSpacer />
        <LoginDisplay></LoginDisplay>
    </MudAppBar>



    <MudMainContent Class="pa-4 pt-16">
        <!-- ✅ pt-16 = padding-top: 64px -->
        <AuthorizeView>
            <NotAuthorized>
                @Body
            </NotAuthorized>
            <Authorized>
                <MudGrid Spacing="3">
                    <!-- ✅ Dashboard principal (70% en desktop) -->
                    <MudItem xs="12" md="9">
                        <ErrorBoundary>
                            <ChildContent>
                                <div style="padding:4px">
                                    @Body
                                </div>

                            </ChildContent>
                            <ErrorContent Context="ex">
                                <div class="blazor-error-boundary">@ex.Message</div>
                            </ErrorContent>
                        </ErrorBoundary>
                    </MudItem>
                    <MudItem xs="12" md="3">
                        <MudPaper Elevation="1" Class="pa-3" Style="position: sticky; top: 72px; max-height: calc(100vh - 120px); overflow-y: auto;">
                           
                            <ProjectList />
                        </MudPaper>
                    </MudItem>
                </MudGrid>

            </Authorized>
        </AuthorizeView>
    </MudMainContent>
</MudLayout>

@code {




}